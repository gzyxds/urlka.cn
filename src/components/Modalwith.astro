<!-- ====== 弹窗组件开始 -->
<div id="modal-container">
  <!-- 弹窗遮罩层 -->
  <div 
    id="modal-overlay" 
    class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 px-4 py-5">
    
    <!-- 弹窗内容 -->
    <div 
      id="modal-content"
      class="relative w-full max-w-[600px] rounded-lg bg-white shadow-xl transform transition-all duration-300 scale-95 dark:bg-dark-2 overflow-hidden">
      
      <!-- 顶部公告条 -->
      <div class="bg-blue-50 dark:bg-blue-900/30 px-5 py-3 flex items-center justify-between">
        <div class="flex items-center text-sm">
          <span class="flex items-center mr-1">
            <span class="w-2 h-2 bg-red-500 rounded-full mr-1.5 animate-pulse"></span>
            <span class="text-gray-600 dark:text-gray-300">公告：</span>
          </span>
          <a href="/contact" class="text-primary font-medium mx-1">联系客服</a>
          <span class="text-gray-600 dark:text-gray-300">咨询产品/代理，关注公众号可以了解</span>
          <a href="#" class="text-primary font-medium mx-1">优惠活动</a>
          <span class="text-gray-600 dark:text-gray-300">和</span>
          <a href="#" class="text-primary font-medium ml-1">产品更新</a>
        </div>
        <!-- 关闭按钮 -->
        <button 
          id="close-modal-x"
          class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-xl leading-none"
          title="关闭弹窗">
          ×
        </button>
      </div>

      <!-- 主内容区域 -->
      <div class="px-6 py-8 sm:px-10 sm:py-10">
        <!-- 标题区域 -->
        <div class="mb-6">
          <div class="flex items-center mb-3">
            <span class="w-6 h-[2px] bg-primary mr-3"></span>
            <span class="text-xs tracking-widest text-primary font-medium">CONNECT SUPPORT</span>
          </div>
          <h3 class="text-2xl font-bold text-dark dark:text-white mb-2">联系客服</h3>
          <p class="text-sm text-body-color dark:text-dark-6">扫描二维码添加客服微信，专业代理指导和优质服务支持</p>
        </div>
        
        <!-- 二维码区域 -->
        <div class="grid grid-cols-2 gap-6 sm:gap-8">
          <!-- 微信客服 -->
          <div class="text-center">
            <div class="bg-white border border-gray-200 dark:border-dark-3 rounded-lg p-4 sm:p-6 mb-4">
              <img 
                src="/assets/team/wx.png" 
                alt="微信客服二维码" 
                class="w-full max-w-[180px] mx-auto" 
                loading="lazy"
              />
            </div>
            <h4 class="text-base font-semibold text-dark dark:text-white mb-1">添加客服微信</h4>
            <p class="text-xs text-body-color dark:text-dark-6">产品咨询 / 代理加盟</p>
          </div>
          
          <!-- 公众号 -->
          <div class="text-center">
            <div class="bg-white border border-gray-200 dark:border-dark-3 rounded-lg p-4 sm:p-6 mb-4">
              <img 
                src="/assets/team/weixin.png" 
                alt="微信公众号二维码" 
                class="w-full max-w-[180px] mx-auto" 
                loading="lazy"
              />
            </div>
            <h4 class="text-base font-semibold text-dark dark:text-white mb-1">关注公众号</h4>
            <p class="text-xs text-body-color dark:text-dark-6">优惠活动 / 产品更新</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const modalOverlay = document.getElementById('modal-overlay');
    const modalContent = document.getElementById('modal-content');
    const closeXBtn = document.getElementById('close-modal-x');
    const openBtn = document.getElementById('open-modal-btn');

    function showModal() {
      if (modalOverlay) {
        modalOverlay.classList.remove('hidden');
        modalOverlay.classList.add('flex');
        setTimeout(() => {
          if (modalContent) {
            modalContent.classList.remove('scale-95');
            modalContent.classList.add('scale-100');
          }
        }, 10);
        document.body.style.overflow = 'hidden';
      }
    }

    function hideModal() {
      if (modalContent) {
        modalContent.classList.remove('scale-100');
        modalContent.classList.add('scale-95');
      }
      setTimeout(() => {
        if (modalOverlay) {
          modalOverlay.classList.remove('flex');
          modalOverlay.classList.add('hidden');
        }
      }, 200);
      document.body.style.overflow = '';
    }

    // 点击按钮打开弹窗
    if (openBtn) {
      openBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showModal();
      });
    }

    // 页面加载20秒后自动显示弹窗
    setTimeout(() => {
      showModal();
    }, 20000);

    if (closeXBtn) {
      closeXBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        hideModal();
      });
    }

    if (modalOverlay) {
      modalOverlay.addEventListener('click', function(e) {
        if (e.target === modalOverlay) {
          hideModal();
        }
      });
    }

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modalOverlay && !modalOverlay.classList.contains('hidden')) {
        hideModal();
      }
    });

    if (modalContent) {
      modalContent.addEventListener('click', function(e) {
        e.stopPropagation();
      });
    }

    window.showModal = showModal;
    window.hideModal = hideModal;
  });
</script>

<style>
  #modal-content {
    transition: all 0.3s ease;
  }
  
  #modal-overlay {
    z-index: 9999;
  }
  
  @media (max-width: 640px) {
    #modal-content {
      margin: 1rem;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    /* 移动端公告条文字换行 */
    #modal-content > div:first-child > div:first-child {
      flex-wrap: wrap;
    }
  }
</style>
<!-- ====== 弹窗组件结束 -->