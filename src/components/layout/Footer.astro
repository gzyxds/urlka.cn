---
import { getCollection } from "astro:content";
import FuzzyText from '../Fuzzytext/Fuzzytext.astro';

// 过滤出 'draft: false' 且发布日期早于当前日期的博客条目
const publishedBlogEntries = await getCollection("blog", ({ data }) => {
  return !data.draft && data.publishDate < new Date();
});

// 按发布日期对内容条目进行排序
publishedBlogEntries.sort(function (a, b) {
  return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
});

const footerLinks = [
  {
    header: '产品服务',
    links: [
      {
        name: '热门产品',
        href: '/Product',
        isExternal: false,
      },
      {
        name: '知识库',
        href: '/base',
        isExternal: false,
      },
      {
        name: 'APP下载',
        href: '/app',
        isExternal: false,
      },
      {
        name: '在线领卡',
        href: '/card',
        isExternal: false,
      },
      {
        name: '飞利猫',
        href: '/caict',
        isExternal: false,
      },
    ],
  },
  {
    header: '服务中心',
    links: [
      {
        name: '代理登入',
        href: '/signup',
        isExternal: false,
      },
      {
        name: '订单查询',
        href: '/OrderInquiry',
        isExternal: false,
      },
      {
        name: '在线客服',
        href: '/online',
        isExternal: false,
      },
      {
        name: '常见问题',
        href: '/fqa',
        isExternal: false,
      },
    ],
  },
  {
    header: '关于我们',
    links: [
      {
        name: '公司介绍',
        href: '/about',
        isExternal: false,
      },
      {
        name: '联系我们',
        href: '/contact',
        isExternal: false,
      },
      {
        name: '加入我们',
        href: '/join',
        isExternal: false,
      },
      {
        name: '合作伙伴',
        href: '/partners',
        isExternal: false,
      },
    ],
  },
  {
    header: '合作产品',
    links: [
      {
        name: '艺创官网',
        href: 'https://urlnet.cn',
        isExternal: true,
      },
      {
        name: '数字分身',
        href: 'https://v.cnai.art',
        isExternal: true,
      },
      {
        name: '艺创AI',
        href: 'https://www.cnai.art',
        isExternal: true,
      },
      {
        name: '优刻云',
        href: 'https://www.cloudcvm.com/',
        isExternal: true,
      },
    ],
  },
];
---

<!-- ====== Footer Section Start -->
<footer
  class="wow fadeInUp relative z-10 bg-[#111928] pt-20 lg:pt-[100px]"
  data-wow-delay=".15s"
>
  <!-- 主标题 - 现代化动感排版 -->
         </span>
        <div class="flex justify-center py-12">
<FuzzyText 
  text="172号卡"
  color="#FFFFFF"
  fontSize="30rem"
  fontWeight={900}
  fontFamily="Arial"
  baseIntensity={0.1}
  hoverIntensity={0.7}
  enableHover={true}
  className="custom-fuzzy-text"
/>
        
    </div>
      </span>
   </h1>
  </div>
  <div class="container">
    <div class="-mx-4 flex flex-wrap">
      <!-- Logo和公司信息区域 - 移动端占满宽度，平板及以上保持原有布局 -->
      <div class="w-full px-4 sm:w-full md:w-1/2 lg:w-4/12 xl:w-3/12">
        <div class="mb-10 w-full">
          <a
            href="/"
            class="mb-6 inline-block max-w-[160px]"
          >
            <img
              src="/assets/logo/logo-white.svg"
              alt="logo"
              class="max-w-full"
            />
          </a>
          <p class="mb-8 max-w-[270px] text-base text-gray-7">
           172号卡分销系统
          </p>
          <div class="flex items-center gap-4 justify-start">
            <!-- 二维码区域 -->
            <!-- 第一个二维码 -->
            <div class="text-center">
              <img 
                src="/assets/team/CrAlaLEc.png" 
                alt="微信二维码" 
                class="w-24 h-24 rounded border border-gray-600"
              />
              <p class="text-xs text-gray-7 mt-1">微信咨询</p>
            </div>
            
            <!-- 第二个二维码 -->
            <div class="text-center">
              <img 
                src="/assets/team/CrAlaLEc.png" 
                alt="客服二维码" 
                class="w-24 h-24 rounded border border-gray-600"
              />
              <p class="text-xs text-gray-7 mt-1">客服支持</p>
            </div>
          </div>
        </div>
      </div>
      <!-- 链接区域容器 - 移动端手风琴布局，桌面端网格布局 -->
      <div class="w-full px-4 sm:w-full md:w-1/2 lg:w-8/12 xl:w-9/12">
        <!-- 移动端手风琴布局 -->
        <div class="block md:hidden space-y-4">
          {footerLinks.map((section, index) => (
            <div class="border-b border-gray-600 pb-4">
              <button 
                class="footer-accordion-btn w-full flex justify-between items-center text-left py-2 text-lg font-semibold text-white hover:text-primary transition-colors duration-200"
                data-target={`footer-section-${index}`}
                aria-expanded="false"
              >
                <span>{section.header}</span>
                <svg 
                  class="footer-accordion-icon w-5 h-5 transform transition-transform duration-200" 
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <div 
                id={`footer-section-${index}`}
                class="footer-accordion-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
              >
                <ul class="pt-4 space-y-2">
                  {section.links.map(link => {
                    if('name' in link) {
                      return (
                        <li>
                          <a
                            href={link.href}
                            class="block text-base text-gray-7 hover:text-primary transition-colors duration-200 py-1"
                            target={link.isExternal ? '_blank' : undefined}
                            rel={link.isExternal ? 'noopener' : undefined}
                          >
                            {link.name}
                          </a>
                        </li>
                      );
                    }
                  })}
                </ul>
              </div>
            </div>
          ))}
        </div>
        
        <!-- 桌面端网格布局 -->
        <div class="hidden md:grid grid-cols-2 lg:grid-cols-4 gap-6">
          {footerLinks.map((section) => (
            <div class="mb-10 w-full">
              <h4 class="mb-6 text-lg font-semibold text-white">{section.header}</h4>
              <ul>
                {section.links.map(link => {
                  if('name' in link) {
                    return (
                      <li>
                        <a
                          href={link.href}
                          class="mb-3 inline-block text-base text-gray-7 hover:text-primary transition-colors duration-200"
                          target={link.isExternal ? '_blank' : undefined}
                          rel={link.isExternal ? 'noopener' : undefined}
                        >
                          {link.name}
                        </a>
                      </li>
                    );
                  }
                })}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-12 border-t border-[#8890A4] border-opacity-40 py-8 lg:mt-[60px]">
    <div class="container">
      <div class="-mx-4 flex flex-wrap">
        <div class="w-full px-4 md:w-2/3 lg:w-1/2">
          <div class="my-1">
            <div
              class="-mx-3 flex items-center justify-center md:justify-start flex-wrap"
            >
              <a
                href="/blog"
                class="px-3 text-base text-gray-7 hover:text-white hover:underline transition-colors duration-200"
              >
               新闻资讯
              </a>
              <a
                href="/feilimao"
                class="px-3 text-base text-gray-7 hover:text-white hover:underline transition-colors duration-200"
              >
               飞利猫
              </a>
              <a
                href="javascript:void(0)"
                class="px-3 text-base text-gray-7 hover:text-white hover:underline transition-colors duration-200"
              >
               隐私政策
              </a>
              <a
                href="javascript:void(0)"
                class="px-3 text-base text-gray-7 hover:text-white hover:underline transition-colors duration-200"
              >
               法律声明
              </a>
              <a
                href="javascript:void(0)"
                class="px-3 text-base text-gray-7 hover:text-white hover:underline transition-colors duration-200"
              >
                服务条款
              </a>
            </div>
          </div>
        </div>
        <div class="w-full px-4 md:w-1/3 lg:w-1/2">
          <div class="my-1 flex justify-center md:justify-end">
            <p class="text-base text-gray-7">
              172号卡
              <a
                href="https://urlka.cn"
                rel="nofollow noopner"
                target="_blank"
                class="text-gray-1 hover:underline"
              >
               备案号：赣ICP备2023002309号-9
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- 手风琴交互脚本 -->
<script>
  /**
   * 初始化Footer手风琴功能
   * 为移动端Footer链接区域添加展开/收缩交互
   */
  function initFooterAccordion() {
    // 获取所有手风琴按钮
    const accordionButtons = document.querySelectorAll('.footer-accordion-btn');
    
    accordionButtons.forEach(button => {
      button.addEventListener('click', function(this: HTMLElement) {
        const targetId = this.getAttribute('data-target') || '';
        const content = document.getElementById(targetId);
        const icon = this.querySelector('.footer-accordion-icon') as HTMLElement;
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        if (isExpanded && content) {
          // 收缩内容
          content.style.maxHeight = '0px';
          this.setAttribute('aria-expanded', 'false');
          icon.style.transform = 'rotate(0deg)';
        } else if (content) {
          // 展开内容
          content.style.maxHeight = content.scrollHeight + 'px';
          this.setAttribute('aria-expanded', 'true');
          icon.style.transform = 'rotate(180deg)';
        }
      });
    });
  }
  
  // DOM加载完成后初始化
  document.addEventListener('DOMContentLoaded', initFooterAccordion);
</script>

<br /><br />
<!-- ====== Footer Section End -->